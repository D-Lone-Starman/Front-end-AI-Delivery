<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Funcionário</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div class="container mt-5">
        <div class="row">
            <!-- Menu lateral -->
            <div class="col-md-3 mb-3">
                <div class="list-group">
                    <a href="#" class="list-group-item list-group-item-action active">Funcionario</a>
                    <a href="#" class="list-group-item list-group-item-action">Dados</a>
                    <a href="#" class="list-group-item list-group-item-action">Pagamento</a>
                </div>
            </div>

            <!-- Formulário -->
            <div class="col-md-9">
                <form action="formFuncionario">
                    <div class="card border-info mb-4">
                        <div class="card-header bg-info text-white">
                            <h5>Novo Funcionário</h5>
                        </div>

                        <div class="card-body">
                            <div class="alert alert-info">
                                Preencha os campos do formulário.
                            </div>

                            <div class="row g-3">
                                <div class="col-md-12">
                                    <label for="nome" class="form-label">Nome</label>
                                    <input type="text" class="form-control" id="nome" name="nome"
                                        placeholder="Nome completo">
                                </div>
                                <div class="col-md-3">
                                    <label for="dataNasc" class="form-label">Data de Nascimento</label>
                                    <input type="date" class="form-control" id="dataNasc" name="dataNasc">
                                </div>
                                <div class="col-md-3">
                                    <label for="rg" class="form-label">RG</label>
                                    <input type="text" class="form-control" id="rg" name="rg"
                                        placeholder="00.000.000-0">
                                </div>
                                <div class="col-md-3">
                                    <label for="cpf" class="form-label">CPF</label>
                                    <input type="text" class="form-control" id="cpf" name="cpf"
                                        placeholder="000.000.000-00">
                                </div>
                                <div class="col-md-3">
                                    <label for="telefone" class="form-label">Telefone</label>
                                    <input type="tel" class="form-control" id="telefone" name="telefone"
                                        placeholder="(00) 00000-0000">
                                </div>

                                <!-- Estado -->
                                <div class="col-md-6">
                                    <label for="estado" class="form-label">Estado</label>
                                    <select class="form-select" id="estado" name="estado">
                                        <option value=''>Selecione o Estado</option>
                                        <option value="SP">SP</option>
                                        <option value="RJ">RJ</option>
                                    </select>
                                </div>

                                <!-- Cidade -->
                                <div class="col-md-6">
                                    <label for="cidade" class="form-label">Cidade</label>
                                    <select class="form-select" id="cidade" name="cidade">
                                        <option value="">Selecione a Cidade</option>
                                        <option value="sao_paulo">São Paulo</option>
                                        <option value="rio">Rio de Janeiro</option>
                                    </select>
                                </div>

                                <!-- Salário -->
                                <div class="col-md-12">
                                    <label for="salario" class="form-label">Salário</label>
                                    <input type="number" class="form-control" id="salario" name="salario"
                                        placeholder="0.00" step="0.01" min="0">
                                </div>
                            </div>
                        </div>

                        <div class="card-footer text-end">
                            <button type="submit" class="btn btn-primary btnenviar">Cadastrar</button>
                            <button type="reset" class="btn btn-secondary">Limpar</button>
                        </div>
                    </div>
                </form>
                <!-- container para resposta -->
                <div id="resp" class="mt-3"></div>


                <div class="col-md-12">
                    <table id="tabelaFuncionarios" class="table table-striped" style="display:none;">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Data de Nascimento</th>
                                <th>RG</th>
                                <th>CPF</th>
                                <th>Telefone</th>
                                <th>Estado</th>
                                <th>Cidade</th>
                                <th>Salário</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>João Silva</td>
                                <td>1990-05-15</td>
                                <td>12.345.678-9</td>
                                <td>123.123.123-00</td>
                                <td>(11) 91234-5678</td>
                                <td>SP</td>
                                <td>São Paulo</td>
                                <td>3500.00</td>
                            </tr>
                            <tr>
                                <td>Maria Oliveira</td>
                                <td>1985-10-20</td>
                                <td>98.765.432-1</td>
                                <td>987.654.321-00</td>
                                <td>(21) 912345-1232</td>
                                <td>RJ</td>
                                <td>Rio de Janeiro</td>
                                <td>4200.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!--tabela zebrada-->


            </div><!-- fecha row -->
        </div>
        <script>
            $(function () {
                const cidadesPorEstado = {
                    'SP': ['São Paulo', 'Campinas', 'Santos'],
                    'RJ': ['Rio de Janeiro', 'Niterói', 'Petrópolis']
                };

                // popula cidades ao mudar estado
                $('#estado').on('change', function () {
                    const estado = $(this).val();
                    const cidades = cidadesPorEstado[estado] || [];

                    let options = "<option value=''>Selecione a Cidade</option>";
                    cidades.forEach(function (cidade) {
                        options += `<option value='${cidade.toLowerCase().replace(/ /g, "_")}'>${cidade}</option>`;
                    });

                    $('#cidade').html(options);
                });

                // envio de formulário com AJAX
                $('.btnenviar').on('click', function (e) {
                    e.preventDefault(); // evita reload

                    // coleta os dados
                    const dados = {
                        nome: $('#nome').val(),
                        dataNasc: $('#dataNasc').val(),
                        rg: $('#rg').val(),
                        cpf: $('#cpf').val(),
                        telefone: $('#telefone').val(),
                        estado: $('#estado').val(),
                        cidade: $('#cidade').val(),
                        salario: $('#salario').val()
                    };

                    // exibe loading
                    $("#resp").html(`
                        <div class="text-center">
                            <div class="spinner-border text-primary" role="status"></div>
                            <p>Enviando dados...</p>
                        </div>
                    `);

                    // simulação de envio com timeout (aqui você trocaria pelo $.ajax real)
                    setTimeout(() => {
                        $("#resp").html(`<div class="alert alert-success">Dados enviados com sucesso!</div>`);
                        $("#tabelaFuncionarios").fadeIn();

                        $("#tabelaFuncionarios tbody").append(`
                        <tr>
                            <td>${dados.nome}</td>
                            <td>${dados.dataNasc}</td>
                            <td>${dados.rg}</td>
                            <td>${dados.cpf}</td>
                            <td>${dados.telefone}</td>
                            <td>${dados.estado}</td>
                            <td>${dados.cidade}</td>
                            <td>${dados.salario}</td>
                        </tr>
                        `);
                        console.log(dados);
                    }, 2000);
                });
            });
        </script>


</body>

</html>